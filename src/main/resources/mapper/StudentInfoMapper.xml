<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hjy.mapper.StudentInfoMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="selectSchoolNumberAndPasswordResult" type="com.hjy.mapper.SelectSchoolNumberAndPasswordResult">
    <result column="school_number" property="schoolNumber"/>
    <result column="password" property="password"/>
</resultMap><resultMap id="BaseResultMap" type="com.hjy.pojo.StudentInfo">
        <id column="school_number" property="schoolNumber" />
        <result column="name" property="name" />
        <result column="password" property="password" />
        <result column="sex" property="sex" />
        <result column="class_id" property="classId" />
        <result column="class_name" property="className" />
        <result column="nation_id" property="nationId" />
        <result column="major_id" property="majorId" />
        <result column="city_id" property="cityId" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        school_number, name, password, sex, class_id, class_name, nation_id, major_id, city_id
    </sql>
<!--auto generated by MybatisCodeHelper on 2022-04-25-->
    <select id="selectSchoolNumberAndPassword" resultMap="selectSchoolNumberAndPasswordResult">
        select school_number, `password`
        from student_info
    </select>
    <select id="selectByIdAndPassword" resultMap="BaseResultMap">
    select * from student_info where
    school_number=#{username} and `password`=#{password}
</select>
    <select id="selectClassByAcademyAndMajor" resultType="java.lang.String">
        select distinct si.class_id from student_info si
        LEFT JOIN major
        on major.major_id = si.major_id
        WHERE major_name =#{major}
    </select>
    <select id="selectAllByInfo" resultMap="BaseResultMap">
        select * from student_info
        where major_id =#{major} and class_id = #{a_class} and sex = #{sex}
    </select>

</mapper>
